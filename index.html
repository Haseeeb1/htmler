<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- For Single File Downloads, we import all the stuff we need from the web. -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.1.min.js"
        integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ=" crossorigin="anonymous"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Montserrat:wght@100;400;700&family=Poppins&family=Raleway&family=Archivo+Black&family=Roboto+Condensed:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="master.css">
    <link rel="shortcut icon" href="icon.ico" type="image/x-icon">
    <title>Htmler | Full Markdown Experience in the browser</title>
</head>
<body>
    <div class="nav">
        <h1>HTMLER</h1>
        <p>All the cool kids write here</p>
    </div>
    <div style="text-align: center; margin-top: 12px;">
        <button id="toggle">Toogle MD Editing and Rich Editing</button>
    </div>
    <div id="md">
        <div class="editor-div">
            <h1 class="title">Just Write Pure Markdown Here üëá</h1>
            <textarea name="text" id="text" cols="30" rows="20"></textarea>
        </div>
        <div style="text-align: center; padding-top: 2rem;">
            <button onclick="save()"><a href="/" id="download">Download The HTML page</a></button>
            <button onclick="copy()">Copy the HTML Code</button>
            <button onclick="pop()">Presentation Mode</button>
        </div>
        <h1 class="title">Done Writing? üìù</h1>
        <div id="content"></div>
        <div style="text-align: center;">
            <label for="file" class="file_upload">
                Upload a Existing File
                <input type="file" name="file" id="file" accept=".txt, .html, .htm, .js, .py, .rb, .json, .md">
            </label>
        </div>
        <p>
            Powered by <a href="https://marked.js.org/">marked.js</a>
        </p>
        <script>
            const hashGen = () => {
                    const lower = "abcdefghijklmnopqrstuvwxyz";
                    const upper = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                    const digits = "0123456789";
                    const whole = lower + upper + digits;
                    const hashString = whole.split('').sort(function () { return 0.5 - Math.random() }).slice(0, 8);
                    const hash = hashString.join('');
                    return hash;
            }
            const save = () => {
                var a = document.getElementById("download");
                var content = "<style>h1, h2, h3, h4, h5, h6, p, a{font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;} a{color: rgb(15, 2, 249); text-decoration: none;} img{width: 80%;} pre{font-family: 'Fira Code', 'Courier New', Courier, monospace; background - color: #d2d5d3; padding: 12px; border - radius: 12px; border: 2px solid #000; } blockquote{background-color: #d2d5d3;padding: 2px;border-radius: 12px;width: 50%;margin: 0px;border: 2px solid #000;}</style>" + marked.parse(document.getElementById("text").value)
                var file = new Blob([content], { type: "html" });
                a.href = URL.createObjectURL(file);
                a.download = hashGen() + ".html";
            }

            const copy = () => {
                window.navigator.clipboard.writeText(marked.parse(document.getElementById("text").value))
                alert("Copied HTML Code to clipboard")
            }

            const pop = () => {
                var pop_window = window.open("", "HTMl Content", "toolbar=yes,status=no,menubar=yes,scrollbars=yes,resizable=yes");
                pop_window.document.body.innerHTML = "<style>h1, h2, h3, h4, h5, h6, p, a{font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;} a{color: rgb(15, 2, 249); text-decoration: none;} img{width: 80%;border-radius:12px;} pre{font-family: 'Fira Code', 'Courier New', Courier, monospace; background - color: #d2d5d3; padding: 12px; border - radius: 12px; border: 2px solid #000; } blockquote{background-color: #d2d5d3;padding: 2px;border-radius: 12px;width: 50%;margin: 0px;border: 2px solid #000;}</style>" + marked.parse(document.getElementById("text").value)
                pop_window.document.title = "HTML Content"
            }
            $(document).ready(function () {
                $("#text").keyup(()=>{
                    document.getElementById("content").innerHTML = marked.parse(document.getElementById("text").value)
                });
                $("#file").change(function (event) {
                    const reader = new FileReader();
                    file = event.target.files[0]
                    if (!file) {
                        return;
                    }
                    reader.onload = function (e) {
                        var contents = e.target.result;
                        displayContents(contents);
                    };
                    reader.readAsText(file);
                })
                function displayContents(contents) {
                    var md_content = document.getElementById('text');
                    md_content.value = contents;
                    document.getElementById("content").innerHTML = marked.parse(document.getElementById("text").value)
                }
            })
        </script>
    </div>
    <div id="rich">
        <div id="editor" style="background-color: #f0f0f0;"></div>
        <div style="text-align: center;">
            <button onclick="rich_save()"><a href="/" id="rich_download">Download The HTML page</a></button>
            <button onclick="rich_copy()">Copy the HTML Code</button>
            <button onclick="rich_pop()">Presentation Mode</button>
        </div>
        <p>
            Powered by <a href="https://alex-d.github.io/Trumbowyg/">Trumbowyg</a>
        </p>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/trumbowyg.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/cleanpaste/trumbowyg.cleanpaste.min.js"></script>
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/colors/ui/trumbowyg.colors.min.css">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/emoji/ui/trumbowyg.emoji.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/colors/trumbowyg.colors.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/emoji/trumbowyg.emoji.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/fontfamily/trumbowyg.fontfamily.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/indent/trumbowyg.indent.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/noembed/trumbowyg.noembed.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/pasteimage/trumbowyg.pasteimage.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/pasteembed/trumbowyg.pasteembed.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/plugins/resizimg/trumbowyg.resizimg.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.1/ui/trumbowyg.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.2/plugins/fontsize/trumbowyg.fontsize.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Trumbowyg/2.25.2/plugins/cleanpaste/trumbowyg.cleanpaste.min.js"></script>
        <script>
            $('#editor').trumbowyg({
                btns: [
                    ['viewHTML'],
                    ['undo', 'redo'], // Only supported in Blink browsers
                    ['formatting'],
                    ['strong', 'em', 'del'],
                    ['superscript', 'subscript'],
                    ['link'],
                    ['insertImage'],
                    ['noembed'],
                    ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],
                    ['foreColor', 'backColor'],
                    ['fontfamily'],
                    ['fontsize'],
                    ['indent', 'outdent'],
                    ['unorderedList', 'orderedList'],
                    ['horizontalRule'],
                    ['removeformat'],
                    ['fullscreen']
                ],
                autogrow: true,
                autogrowOnEnter: true,
                imageWidthModalEdit: true,
                minimalLinks: true,
                defaultLinkTarget: '_blank',
                plugins: {
                    fontsize: {
                        sizeList: [
                            '18px',
                            '24px',
                            '48px'
                        ]
                    }
                }
            });
            const rich_save = () => {
                var a = document.getElementById("rich_download");
                var content = "<style>h1, h2, h3, h4, h5, h6, p, a{font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;} a{color: rgb(15, 2, 249); text-decoration: none;} img{width: 20%;}</style>" + $('#editor').trumbowyg('html')
                var file = new Blob([content], { type: "html" });
                a.href = URL.createObjectURL(file);
                a.download = name;
            }

            const rich_copy = () => {
                window.navigator.clipboard.writeText($('#editor').trumbowyg('html'))
                alert("Copied HTML Code to clipboard")
            }

            const rich_pop = () => {
                var pop_window = window.open("", "HTMl Content", "toolbar=yes,status=no,menubar=yes,scrollbars=yes,resizable=yes");
                pop_window.document.body.innerHTML = "<style>h1, h2, h3, h4, h5, h6, p, a{font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;} a{color: rgb(15, 2, 249); text-decoration: none;} img{width: 20%;}</style>" + $('#editor').trumbowyg('html')
                pop_window.document.title = "HTML Content"
            }
        </script>
    </div>
    <div style="padding: 1vw;">
        <h2>About</h2>
        <p>
            This is a very simple project to just showcase how you don't need bulky markdown editors. You can just use this
            light weight editor on the web.
            Now it may not provide all the cool stuff that a fully featured editor may provide, but it gets the job done.
            With support for drag and drop, auto styling and more.
            You can even download the markdown as a github theme styled html page. You can even use this offline. Just clone
            the <a href="https://github.com/newtoallofthis123/htmler">repository</a> and you are good to go. It is barely
            120kb. This can be used as an online single file or an offline repository. This supports modern markdown with
            all the features including mark and more.</p>
        </p>
        <h2>Maintainers</h2>
        <p>
            This project is open source and licensed under the <a href="https://newtoallofthis123.github.io/license">MIT</a>
            License and is publicly available on <a href="https://github.com/newtoallofthis123/htmler">github</a>. You are
            free to contribute and make this project better.
            This project only uses HTMl, CSS and Javascript. So it is prefect for beginners.
            This project is actively developed and maintained by <a
                href="https://newtoallofthis123.github.io/About">NoobScience</a>.
        </p>
    </div>
    <footer class="footer">
        <h1>&copy NoobScience <span id="year"></span></h1>
    </footer>
</body>
<script>
    $("#rich").toggle()
    $("#toggle").click(function(){
        $("#md").toggle()
        $("#rich").toggle()
    }
    )
    $("#year").text(new Date().getFullYear())
</script>
</html>